## 一页梳理版：插件让大模型“会用工具”

### 0. 前言要点

* 你已能用 API 批量处理任务
* 现实问题：大模型对某些任务不可靠，典型例子是**算术**

  * 例：`393 × 285` 模型可能算错
  * 正确答案：`112005`
* 关键思想：人类不擅长算术会用计算器，大模型同样可以借助**插件（工具）**补齐短板

---

## 课程目标

* 理解：大模型插件如何使用
* 掌握：插件工作原理
* 延伸：开发自定义插件的基本方向

---

## 1. 什么是插件

**插件**是用于增强与扩展基础大模型能力的软件组件，使模型具备“调用外部能力”的接口。

### 1.1 插件典型能力

* **基础工具类**：计算器、时钟、天气、股票行情
* **实时信息类**：体育赛事、实时热点新闻
* **能力拓展类**：图片生成、语音合成、代码解释器

### 1.2 企业定制插件（业务系统对接）

企业内部可基于 API 开发专用插件，把模型接到业务系统上，例如：

* 差旅：调用飞猪开放平台查询酒店、预订机票
* IT 运维：查询云账号资源、已购云服务器、监控告警
* OA 办公：创建待办、预约会议室、查日程

---

## 2. 插件演示的关键结论

### 2.1 不加工具：模型算错的原因

* 大模型生成的是“最可能的文本”，并不等价于执行精确运算
* 即使它输出“代码”，也可能只是生成文本，没有真正运行

### 2.2 加计算器插件：结果正确

* 机制：模型识别任务需要精确运算 → 调用计算器 → 拿到真实结果 → 组织回答
* 产出：`112005`

### 2.3 加代码解释器插件：结果也正确

* 机制：模型生成 Python 代码 → 解释器真实执行 → 返回计算结果 → 组织回答
* 本质差异：这里的“代码”被执行，产出由运行结果决定

---

## 3. 工作原理：插件决策流程

可以抽象为一个“工具选择与调用”闭环，逻辑与人类一致：

1. **接收输入**：用户提出问题
2. **判断是否需要工具**：识别任务是否需要外部能力或实时数据
3. **选择工具**：计算器、搜索、解释器、图像生成等
4. **调用工具**：按工具输入规范发起请求
5. **获取结果**：得到结构化返回值
6. **继续推理生成**：基于工具结果完成最终答复

> 核心变化：模型从“纯文本生成器”升级为“会调度工具的任务执行器”。

---

## 4. 阿里云上的插件支持要点

### 4.1 百炼平台插件

* 提供预置插件：图片生成、夸克搜索、Python 代码解释器、计算器等
* 支持自定义插件：把企业内部能力封装为可调用工具

### 4.2 通义千问兼容 OpenAI API 的 function call

* 灵积产品提供兼容 OpenAI API 的通义千问接口
* 支持 function call
* 价值点：

  * 面向中文用户体验优化
  * 满足国内合规与备案诉求
  * 在业务代码改动较小的情况下，把后端从 OpenAI API 切到通义千问 API

---

## 本节小结的可迁移结论

* 插件让模型获得“真实执行能力”和“实时世界连接”
* 典型组合方式：模型负责理解与规划，工具负责执行与取数
* 想象空间：把模型接入现有系统，让它完成可执行任务

  * 待办创建
  * 会议室预约
  * 云资源查询
  * 差旅预订
* 最终形态：插件增强的大模型应用接近“私人助理”，用户只需下达指令

---

## 建议你在讲义里补一页的“判断何时该用插件”

* 需要**精确性**：算术、日期换算、金融计算
* 需要**实时性**：天气、新闻、股票、赛事
* 需要**可执行动作**：下单、预订、查询系统、写数据库
* 需要**可验证产出**：代码必须跑通、数据必须可复算